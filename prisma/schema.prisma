generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  MEMBER
  OWNER
}

model User {
  id            String       @id @default(cuid())
  name          String?
  email         String       @unique
  emailVerified DateTime?
  imageProfile  String?
  password      String
  role          Role         @default(MEMBER)
  forum         Forum[]
  blog          Blog[]
  member        Member?
  owner         Owner?
  like          Like[]
  dislike       DisLike[]
  notifikasi    Notifikasi[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  memberId  String?
  ownerId   String?
}

model Member {
  id        String      @id @default(cuid())
  userId    String      @unique
  gender    String
  reservasi Reservasi[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Owner {
  id        String     @id @default(cuid())
  userId    String     @unique
  destinasi Destinasi?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  id      String   @id @default(uuid())
  email   String
  token   String   @unique
  expires DateTime

  @@unique([email, token])
}

model Forum {
  id      String    @id @default(uuid())
  userId  String
  image   String?
  title   String
  content String[]
  like    Like[]
  dislike DisLike[]

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Blog {
  id      String   @id @default(uuid())
  userId  String
  image   String?
  title   String
  content String[]

  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Reservasi {
  id               String    @id @default(uuid())
  memberId         String
  destinasiId      String
  namaUser         String
  nomorTelfon      String
  status           Boolean
  tanggalReservasi DateTime  @default(now())
  member           Member?   @relation(fields: [memberId], references: [id])
  destinasi        Destinasi @relation(fields: [destinasiId], references: [id])
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
}

model Destinasi {
  id             String  @id @default(uuid())
  ownerId        String  @unique
  image          String?
  namaDestinasi  String
  deskripsi      String
  alamat         String
  nomorOwner     String
  kategoriLokasi String
  jamOprasional  String
  buka           Boolean @default(false)

  owner     Owner       @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  Reservasi Reservasi[]
}

model Like {
  id        String   @id @default(uuid())
  forumId   String   @unique
  userId    String   @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  forum     Forum    @relation(fields: [forumId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model DisLike {
  id        String   @id @default(uuid())
  forumId   String   @unique
  userId    String   @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  forum     Forum    @relation(fields: [forumId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Notifikasi {
  id        String   @id @default(uuid())
  userId    String   @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  pesan     String   @default("Ada Pesan Baru!")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
